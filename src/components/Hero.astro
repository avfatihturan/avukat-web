---
interface Props {
  title: string;
  subtitle?: string;
  lead?: string;          // ✅ eklendi
  image?: string;
  altText?: string;       // ✅ eklendi
  size?: "lg" | "sm";
}

const {
  title,
  subtitle,
  lead,
  image = "/images/banner-home.webp",
  altText,
  size = "sm",
} = Astro.props;

const isLarge = size === "lg";

// ✅ ALT için title içindeki HTML'i temizle (br vs.)
const cleanText = (s: string = "") =>
  String(s)
    .replace(/<br\s*\/?>/gi, " ")
    .replace(/<[^>]*>/g, "")
    .replace(/\s+/g, " ")
    .trim();

const computedAlt = altText ? altText : cleanText(title);
---

<section class:list={["hero-section", { "hero-lg": isLarge, "hero-sm": !isLarge }]}>
  <div class="hero-bg-wrapper">
    <img
      src={image}
      alt={computedAlt}
      class="hero-img"
      width="2560"
      height="1440"
      loading={isLarge ? "eager" : "lazy"}
      fetchpriority={isLarge ? "high" : "auto"}
      decoding="async"
    />
    <div class="hero-overlay"></div>
  </div>

  <div class="container hero-content">
    {subtitle && <span class="hero-subtitle">{subtitle}</span>}

    <h1 class="hero-title" set:html={title}></h1>

    {/* ✅ A seçimi: H1 slogan kalır, altına açıklayıcı lead gelir (p etiketi) */}
    {lead && <p class="hero-lead">{lead}</p>}

    {isLarge && (
      <div class="hero-actions">
        <a href="/iletisim" class="btn-hero primary">Randevu Alın</a>
        <a href="/calisma-alanlari" class="btn-hero outline">Çalışma Alanları</a>
      </div>
    )}
  </div>
</section>

<style>
  .hero-section {
    position: relative;
    width: 100%;
    overflow: hidden;
    display: flex;
    align-items: center;
    padding-top: 80px;
  }

  .hero-lg { min-height: 85vh; background-color: var(--brand-primary); }
  .hero-sm { min-height: 45vh; background-color: var(--brand-primary); }

  .hero-bg-wrapper { position: absolute; inset: 0; z-index: 1; }

  .hero-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg,
      rgba(0, 40, 85, 0.95) 0%,
      rgba(0, 40, 85, 0.75) 50%,
      rgba(0, 40, 85, 0.3) 100%
    );
  }

  .hero-content {
    position: relative;
    z-index: 2;
    color: #fff;
    max-width: 1200px;
    width: 100%;
  }

  .hero-subtitle {
    display: inline-block;
    color: var(--brand-accent);
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    font-size: 0.9rem;
    margin-bottom: 1rem;
    border-left: 3px solid var(--brand-accent);
    padding-left: 12px;
  }

  .hero-title {
    font-size: 3.5rem;
    font-weight: 800;
    line-height: 1.2;
    margin-bottom: 2rem;
    max-width: 800px;
    color: #ffffff;
    text-shadow: 0 10px 30px rgba(0,0,0,0.3);
    white-space: pre-line;
  }

  /* ✅ yeni: lead metin stili */
  .hero-lead {
    max-width: 760px;
    margin: -1rem 0 2rem;
    font-size: 1.05rem;
    line-height: 1.7;
    color: rgba(255,255,255,0.88);
  }

  .hero-actions { display: flex; gap: 16px; flex-wrap: wrap; }

  .btn-hero {
    padding: 16px 36px;
    border-radius: 8px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    text-transform: uppercase;
    font-size: 0.9rem;
    letter-spacing: 0.5px;
  }

  .btn-hero.primary { background-color: var(--brand-accent); color: #000; }
  .btn-hero.primary:hover { background-color: #fff; transform: translateY(-2px); }

  .btn-hero.outline { border: 1px solid rgba(255,255,255,0.4); color: #fff; backdrop-filter: blur(4px); }
  .btn-hero.outline:hover { border-color: #fff; background: rgba(255,255,255,0.1); }

  @media (max-width: 768px) {
    .hero-title { font-size: 2.2rem; }
    .hero-lead { font-size: 0.98rem; margin: -1rem 0 1.6rem; }
    .hero-lg { min-height: 70vh; }
    .hero-sm { min-height: 35vh; }
    .hero-overlay {
      background: linear-gradient(180deg, rgba(0, 40, 85, 0.9) 0%, rgba(0, 40, 85, 0.5) 100%);
    }
  }
</style>