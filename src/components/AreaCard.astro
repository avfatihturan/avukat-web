---
interface Props {
  title: string;
  description: string;
  icon: string;
  ctaText?: string;
  ctaLink?: string;
}

const { title, description, icon, ctaText = "Detaylı Bilgi →", ctaLink = "/iletisim" } = Astro.props;

/**
 * Premium / crisp inline SVG icons (24x24)
 * - stroke icons (kalın, net)
 * - color: currentColor (CSS'ten geliyor)
 */
const ICONS: Record<string, string> = {
  // Ceza: Tokmak (gavel)
  gavel: `
    <path d="M14 5l5 5" />
    <path d="M11 8l5 5" />
    <path d="M3 21l8-8" />
    <path d="M9 7l3-3 5 5-3 3z" />
    <path d="M13 11l3-3 5 5-3 3z" />
    <path d="M2 22h8" />
  `,

  // İş: Dişli (gear)
  gears: `
    <path d="M12 2l1.1 2.6 2.8.4-2 2 .5 2.8L12 8.9 9.6 9.8l.5-2.8-2-2 2.8-.4L12 2z" opacity="0" />
    <path d="M12 7.5a4.5 4.5 0 1 0 0 9a4.5 4.5 0 0 0 0-9z" />
    <path d="M12 1.8v2.2" />
    <path d="M12 20v2.2" />
    <path d="M4.3 4.3l1.6 1.6" />
    <path d="M18.1 18.1l1.6 1.6" />
    <path d="M1.8 12h2.2" />
    <path d="M20 12h2.2" />
    <path d="M4.3 19.7l1.6-1.6" />
    <path d="M18.1 5.9l1.6-1.6" />
  `,

  // Konut & kira: Ev (house)
  house: `
    <path d="M3 10.5l9-7 9 7" />
    <path d="M5.5 9.8V20a1.5 1.5 0 0 0 1.5 1.5h10A1.5 1.5 0 0 0 18.5 20V9.8" />
    <path d="M10 21.5v-6a2 2 0 0 1 4 0v6" />
  `,

  // Şirketler: Gökdelen (skyscraper)
  skyscraper: `
    <path d="M7 21V4.5A1.5 1.5 0 0 1 8.5 3H15.5A1.5 1.5 0 0 1 17 4.5V21" />
    <path d="M3 21h18" />
    <path d="M10 7h1" />
    <path d="M13 7h1" />
    <path d="M10 10h1" />
    <path d="M13 10h1" />
    <path d="M10 13h1" />
    <path d="M13 13h1" />
    <path d="M11 21v-4a1 1 0 0 1 2 0v4" />
  `,

  // Uluslararası: Dünya (globe)
  globe: `
    <circle cx="12" cy="12" r="9" />
    <path d="M3 12h18" />
    <path d="M12 3c2.8 2.4 4.5 5.7 4.5 9s-1.7 6.6-4.5 9c-2.8-2.4-4.5-5.7-4.5-9S9.2 5.4 12 3z" />
  `,

  // 6284: Kalkan içinde kalp (shieldHeart)
  shieldHeart: `
    <path d="M12 2l7 4v6c0 5-3 9-7 10c-4-1-7-5-7-10V6l7-4z" />
    <path d="M12 17s-3.4-2.2-4.6-4.2c-.9-1.5.1-3.4 1.8-3.8c1-.2 2 .2 2.8 1.2c.8-1 1.8-1.4 2.8-1.2c1.7.4 2.7 2.3 1.8 3.8C15.4 14.8 12 17 12 17z" />
  `,

  default: `
    <circle cx="12" cy="12" r="9" />
    <path d="M8 12h8" />
  `
};

const normalizeIcon = (name: string) => (name || "").toLowerCase();

const getIconMarkup = (name: string) => {
  const n = normalizeIcon(name);

  if (n.includes("gavel") || n.includes("tokmak") || n.includes("ceza")) return ICONS.gavel;
  if (n.includes("gear") || n.includes("gears") || n.includes("dişli") || n.includes("is")) return ICONS.gears;
  if (n.includes("house") || n.includes("home") || n.includes("konut") || n.includes("kira")) return ICONS.house;
  if (n.includes("building") || n.includes("skyscraper") || n.includes("sirket")) return ICONS.skyscraper;
  if (n.includes("globe") || n.includes("dunya") || n.includes("uluslar")) return ICONS.globe;
  if (n.includes("shield") || n.includes("6284") || n.includes("kalkan")) return ICONS.shieldHeart;

  return ICONS.default;
};
---

<a href={ctaLink} class="card-link">
  <div class="custom-card">
    <div class="card-icon" aria-hidden="true">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        width="56"
        height="56"
        class="icon-svg"
      >
        <g set:html={getIconMarkup(icon)} />
      </svg>
    </div>

    <h3 class="card-title">{title}</h3>
    <p class="card-desc">{description}</p>

    <div class="card-footer">
      <span>{ctaText}
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="14" height="14" fill="currentColor" style="display:inline; margin-left:5px;">
          <path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/>
        </svg>
      </span>
    </div>
  </div>
</a>

<style>
  .card-link { display: block; text-decoration: none; height: 100%; }

  .custom-card {
    background-color: #ffffff;
    border: 1px solid rgba(0,0,0,0.05);
    border-top: 4px solid var(--brand-accent);
    border-radius: 12px;
    padding: 2.5rem 2rem;
    height: 100%;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1), box-shadow 0.3s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.02);
  }

  .custom-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.08);
    border-color: rgba(0,0,0,0.05);
  }

  .card-icon {
    color: var(--brand-accent);
    text-align: center;
    margin-bottom: 1.5rem;
    display: flex;
    justify-content: center;
    opacity: 1;
    /* Drop-shadow bazen “silik” algısı yaratabiliyor; kaldırdım */
    filter: none;
  }

  .icon-svg {
    display: block;
    width: 56px;
    height: 56px;
    stroke: currentColor;
    fill: none;
    stroke-width: 2.6;
    stroke-linecap: round;
    stroke-linejoin: round;
    shape-rendering: geometricPrecision;
  }

  .card-title {
    font-size: 1.35rem;
    font-weight: 700;
    color: #002B5B;
    text-align: center;
    margin-bottom: 1rem;
    letter-spacing: -0.5px;
  }

  .card-desc {
    font-size: 1rem;
    color: #444444;
    line-height: 1.7;
    text-align: center;
    flex-grow: 1;
    margin-bottom: 2rem;
  }

  .card-footer {
    border-top: 1px solid rgba(0,0,0,0.05);
    padding-top: 1.5rem;
    text-align: center;
    color: #002B5B;
    font-weight: 700;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: color 0.2s;
  }

  .custom-card:hover .card-footer { color: var(--brand-accent); }
</style>