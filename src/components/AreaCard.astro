---
interface Props {
  title: string;
  description: string;
  ctaLink?: string;
  ctaText?: string;
  icon?: string;
  id?: string;
  variant?: "default" | "compact";
}

const {
  title,
  description,
  ctaLink = "/iletisim",
  ctaText = "DETAYLI BİLGİ AL →",
  icon = "",
  id = "",
  variant = "default",
} = Astro.props;

/* --- İKON TANIMLARI (PREMIUM SVG SETİ) --- */
const ICONS: Record<string, string> = {
  // CEZA
  gavel: `<svg viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M25,16.5l-4.5-4.5l-8.5,8.5l4.5,4.5L25,16.5z M19.5,13.5l3,3l-7.5,7.5l-3-3L19.5,13.5z"/><path d="M12.5,7.5l-4.5,4.5l3,3l4.5-4.5L12.5,7.5z M9.5,11.5l1.5-1.5l1.5,1.5l-1.5,1.5L9.5,11.5z"/><path d="M14.5,5.5l-4.5,4.5l3,3l4.5-4.5L14.5,5.5z M11.5,9.5l1.5-1.5l1.5,1.5l-1.5,1.5L11.5,9.5z"/><rect x="2" y="24" width="28" height="2"/></svg>`,
  
  // İŞ
  gear: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M2 12C2 12.55 2.45 13 3 13H4.07C4.32 14.15 4.77 15.22 5.39 16.18L4.63 16.94C4.24 17.33 4.24 17.96 4.63 18.35L5.65 19.37C6.04 19.76 6.67 19.76 7.06 19.37L7.82 18.61C8.78 19.23 9.85 19.68 11 19.93V21C11 21.55 11.45 22 12 22C12.55 22 13 21.55 13 21V19.93C14.15 19.68 15.22 19.23 16.18 18.61L16.94 19.37C17.33 19.76 17.96 19.76 18.35 19.37L19.37 18.35C19.76 17.96 19.76 17.33 19.37 16.94L18.61 16.18C19.23 15.22 19.68 14.15 19.93 13H21C21.55 13 22 12.55 22 12C22 11.45 21.55 11 21 11H19.93C19.68 9.85 19.23 8.78 18.61 7.82L19.37 7.06C19.76 6.67 19.76 6.04 19.37 5.65L18.35 4.63C17.96 4.24 17.33 4.24 16.94 4.63L16.18 5.39C15.22 4.77 14.15 4.32 13 4.07V3C13 2.45 12.55 2 12 2C11.45 2 11 2.45 11 3V4.07C9.85 4.32 8.78 4.77 7.82 5.39L7.06 4.63C6.67 4.24 6.04 4.24 5.65 4.63L4.63 5.65C4.24 6.04 4.24 6.67 4.63 7.06L5.39 7.82C4.77 8.78 4.32 9.85 4.07 11H3C2.45 11 2 11.45 2 12Z" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  
  // KİRA/KONUT
  key: `<svg viewBox="0 0 52 52" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M41,21c0-6.1-4.9-11-11-11c-4.9,0-9,3.2-10.5,7.7L2,35.4V42h8v-4h4v-4l4.2-4.2c1.5,0.4,3,0.6,4.8,0.6 C36.1,32,41,27.1,41,21z M26,21c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S27.7,21,26,21z"/></svg>`,
  
  // ŞİRKETLER
  building: `<svg viewBox="0 0 52 52" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12,48h28V4H12V48z M26,8h10v4H26V8z M26,16h10v4H26V16z M26,24h10v4H26V24z M26,32h10v4H26V32z M26,40h10v4H26V40z M16,8 h6v4h-6V8z M16,16h6v4h-6V16z M16,24h6v4h-6V24z M16,32h6v4h-6V32z M16,40h6v4h-6V40z"/></svg>`,
  
  // ULUSLARARASI
  globe: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M3.6001 9H20.4001" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M3.6001 15H20.4001" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 3C14.5013 5.43828 15.9228 8.6465 16 12C15.9228 15.3535 14.5013 18.5617 12 21C9.49872 18.5617 8.07725 15.3535 8 12C8.07725 8.6465 9.49872 5.43828 12 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  
  // 6284
  shield: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 21C12 21 4 18 4 12V6L12 3L20 6V12C20 18 12 21 12 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 15.5C12 15.5 15 13.5 15 11.5C15 10.1193 13.8807 9 12.5 9C12.3159 9 12.1384 9.01994 11.9676 9.05775C11.9892 9.01962 12 8.98005 12 8.94008C12 8.42088 11.5791 8 11.0599 8C10.793 8 10.5526 8.11124 10.3857 8.29035C10.0911 7.51868 9.35123 7 8.5 7C7.39543 7 6.5 7.89543 6.5 9C6.5 11 9.5 13 9.5 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`,

  // Default
  default: `<svg viewBox="0 0 512 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"/></svg>`
};

const getSvg = (idVal: string, iconVal: string) => {
  // Gelen veriye göre doğru ikonu bul
  const key = (idVal || iconVal || '').toLowerCase();
  
  if (key.includes('ceza') || key.includes('gavel')) return ICONS.gavel;
  if (key.includes('is') || key.includes('gear')) return ICONS.gear;
  if (key.includes('kira') || key.includes('konut') || key.includes('house') || key.includes('home')) return ICONS.key;
  if (key.includes('sirket') || key.includes('building')) return ICONS.building;
  if (key.includes('uluslar') || key.includes('globe')) return ICONS.globe;
  if (key.includes('siddet') || key.includes('6284') || key.includes('shield')) return ICONS.shield;
  
  return ICONS.default;
};

const svgContent = getSvg(id, icon);
---

<a class={`area-card ${variant === "compact" ? "compact" : ""}`} href={ctaLink}>
  <div class="icon-wrap" aria-hidden="true" set:html={svgContent} />

  <h3>{title}</h3>
  <p>{description}</p>

  <div class="card-footer">
    <span class="cta">{ctaText}</span>
  </div>
</a>

<style>
  .area-card {
    background: var(--card-bg);
    border: 1px solid var(--color-border);
    border-radius: 16px;
    padding: 30px;
    display: flex;
    flex-direction: column;
    height: 100%;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: var(--shadow-sm);
    text-decoration: none;
    position: relative;
    overflow: hidden;
  }

  .area-card:hover {
    border-color: var(--brand-accent);
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover);
  }

  .icon-wrap {
    width: 64px;
    height: 64px;
    margin: 0 auto 18px;
    color: var(--brand-accent); /* İkon rengi artık buradan kontrol ediliyor */
    display: flex;
    align-items: center;
    justify-content: center;
    filter: drop-shadow(0 4px 6px rgba(197, 160, 89, 0.15));
    transition: transform 0.3s ease;
  }

  .area-card:hover .icon-wrap {
    transform: scale(1.1);
  }

  /* SVG'lere müdahale */
  .icon-wrap :global(svg) {
    display: block;
    width: 48px;
    height: 48px;
    /* Rengi otomatik olarak parent'tan alır (currentColor) */
  }

  h3 {
    text-align: center;
    margin: 0 0 14px;
    font-size: 1.35rem;
    color: var(--brand-primary);
    font-weight: 700;
  }
  :global(html.dark) h3 { color: var(--color-text); }

  p {
    text-align: center; /* Sola yaslanmayı önlemek için center */
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.7;
    font-size: 0.95rem;
    min-height: 105px;
  }

  .card-footer {
    margin-top: auto;
    padding-top: 24px;
    border-top: 1px solid var(--color-border-soft);
  }
  :global(html.dark) .card-footer { border-top-color: rgba(255,255,255,0.08); }

  .cta {
    display: block;
    text-align: center;
    font-weight: 700;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: var(--brand-primary);
    font-size: 0.85rem;
    transition: color 0.2s;
  }
  :global(html.dark) .cta { color: var(--brand-accent); }
  .area-card:hover .cta { color: var(--brand-accent); }

  .area-card.compact { padding: 24px; }
  .area-card.compact .icon-wrap { width: 56px; height: 56px; margin-bottom: 14px; }
  .area-card.compact .icon-wrap :global(svg) { width: 42px; height: 42px; }
</style>