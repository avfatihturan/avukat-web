---
interface Props {
  headings: { depth: number; slug: string; text: string }[];
}

const { headings } = Astro.props;
const h2Headings = headings.filter(h => h.depth === 2);
---

{h2Headings.length > 0 && (
  <nav class="toc-box" aria-label="İçindekiler">
    <p class="toc-title">İçindekiler:</p>
    <ol>
      {h2Headings.map((h, i) => (
        <li>
          <a href={`#${h.slug}`}>{i + 1}) {h.text}</a>
        </li>
      ))}
    </ol>
  </nav>
)}

<style>
  .toc-box {
    background: var(--color-bg-secondary);
    padding: 20px;
    border-left: 4px solid var(--brand-accent);
    margin-bottom: 30px;
    border: 1px solid var(--color-border);
    border-radius: 4px;
  }

  .toc-title {
    font-weight: 700;
    margin-bottom: 10px;
    color: var(--brand-primary);
  }
  :global(html.dark) .toc-title { color: var(--color-text); }

  .toc-box ol {
    list-style: none;
    padding: 0;
    margin: 0;
    line-height: 1.8;
  }

  .toc-box a {
    text-decoration: underline;
    color: var(--color-text);
    transition: color 0.2s ease;
  }

  .toc-box a:hover {
    color: var(--brand-accent);
  }
</style>
