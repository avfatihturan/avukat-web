---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import { getEntry } from 'astro:content';

const siteEntry = await getEntry('site', 'main');
const aboutEntry = await getEntry('about', 'main');

// HATA ÇÖZÜMÜ: Bu kontrol TypeScript'i susturur
if (!siteEntry || !aboutEntry) {
  throw new Error('Hakkımda sayfası için gerekli veriler (json) bulunamadı.');
}

const { name } = siteEntry.data;
const { paragraphs, signature } = aboutEntry.data;
---

<BaseLayout
  title={`Hakkımda | ${name}`}
  description={`${name} hakkında bilgi. Disiplin, Strateji ve Hukuk vizyonu.`}
  currentPage="hakkimda"
  canonicalUrl="/hakkimda"
>
  <Hero title="Hakkımda" size="sm" />

  <section class="bg-light">
    <div class="container about-container">
      <h2 class="section-heading">Disiplin. Strateji. Hukuk.</h2>
      
      <div class="about-content">
        {paragraphs && paragraphs.map((paragraph) => (
          <p set:html={paragraph} />
        ))}
        <div class="about-signature">
          <p><strong>{signature?.name}</strong><br>{signature?.bar}</p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .about-container { max-width: 800px; margin: 0 auto; }
  .about-content { font-size: 1.15rem; text-align: justify; line-height: 1.8; color: var(--color-text); }
  .about-content p { margin-bottom: 1.5em; }
  .about-signature { margin-top: 40px; padding-top: 20px; border-top: 2px solid var(--brand-accent); width: fit-content; }
  .section-heading { margin-bottom: 40px; font-weight: 700; color: var(--brand-primary); }
  :global(html.dark) .section-heading { color: var(--color-text); }
</style>